{"version":3,"file":"card-component.js","sourceRoot":"","sources":["../../../../src/components/binering/shiraz/card-component.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css } from 'lit';\nimport { state, customElement } from 'lit/decorators.js';\nimport cssg from '../globalcss';\nimport { StoreSubscriber } from 'lit-svelte-stores';\nimport { GameStore } from '../store';\nimport { GenerateCardData } from '../../../types/binering/Card';\nimport { ComputerPlayer } from '../../../types/binering/ComputerPlay';\n\n@customElement('card-component')\nexport class CardComponent extends LitElement {\n  @state()\n  value: boolean = false;\n\n  @state()\n  playerId?: number;\n\n  @state()\n  deckId?: string;\n\n  @state()\n  draggable: boolean = false;\n\n  game = new StoreSubscriber(this, () => GameStore);\n\n  constructor() {\n    super();\n  }\n\n  render() {\n    var background = this.value == true ? `blue` : 'red';\n    var border = this.value == true ? `#075ac1` : '#b31414d6';\n    return html`<div\n      style=\"background-color:${background}; border-color:${border}\"\n      draggable=${this.isDraggable()}\n      @dragstart=${this.dragstarted}\n      @dragend=${this.dragended}\n      @dblclick=${this.doubleClick}\n      class=\"card ${this.draggableClass()}\"\n      card-data=${GenerateCardData(this.playerId!, this.deckId!, this.value)}\n    >\n      ${this.value ? 1 : 0}\n    </div> `;\n  }\n  async doubleClick(e: any) {\n    if (this.game.value.players[this.playerId!].isComputer == true) return;\n\n    // if (\n    //   !(await ComputerPlayer.fill_empty_deck(\n    //     this.game.value.players[this.playerId!],\n    //     this.game.value\n    //   ))\n    // ) {\n    //   await this.game.value.players[this.playerId!].remove_card(\n    //     e.target.getAttribute('card-data')\n    //   );\n    // }\n\n    await this.game.value.players[this.playerId!].remove_card(\n      e.target.getAttribute('card-data')\n    );\n    GameStore.update(val => {\n      val = this.game.value;\n      return val;\n    });\n  }\n  dragstarted(e: any) {\n    this.style.opacity = '0.2';\n    e.dataTransfer.effectAllowed = 'move';\n    var data = e.target.getAttribute('card-data');\n    e.dataTransfer.setData(data, data);\n  }\n  dragended() {\n    this.style.opacity = '1';\n  }\n  connectedCallback() {\n    super.connectedCallback();\n  }\n  private isDraggable(): boolean {\n    if (this.game.value.players[this.playerId!].isComputer) return false;\n    return this.draggable;\n  }\n  private draggableClass() {\n    if (this.game.value.players[this.playerId!].isComputer) return '';\n    if (this.draggable) return 'draggable';\n  }\n\n  static get styles() {\n    return [\n      cssg,\n      css`\n        div.card {\n          height: 1.5em;\n          width: 1.1em;\n          flex: 100px 1 0;\n          border-radius: 5px;\n          margin-bottom: -20px;\n          box-shadow: 3px 3px 3px gray;\n          color: white;\n          font-size: 2em;\n          border: 3px solid;\n          -webkit-user-select: none; /* Safari */\n          -moz-user-select: none; /* Firefox */\n          -ms-user-select: none; /* IE10+/Edge */\n          user-select: none; /* Standard */\n        }\n        .draggable {\n          cursor: pointer;\n        }\n        .draggable:hover {\n          animation: blinker 1s linear infinite;\n        }\n        @keyframes blinker {\n          50% {\n            opacity: 0.3;\n          }\n        }\n      `,\n    ];\n  }\n}\n"]}