{"version":3,"file":"create-game.js","sourceRoot":"","sources":["../../../../src/components/binering/shiraz/create-game.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,KAAK,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAEzD,OAAO,EAAE,eAAe,EAAE,MAAM,6BAA6B,CAAC;AAC9D,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AAExE,OAAO,sBAAsB,CAAC;AAC9B,OAAO,gCAAgC,CAAC;AACxC,OAAO,oCAAoC,CAAC;AAGrC,IAAM,UAAU,GAAhB,MAAM,UAAW,SAAQ,UAAU;IAQxC,WAAW;QACT,OAAO,IAAI,CAAC,MAAM;YAChB,IAAI,CAAC,QAAQ,CAAC;IAClB,CAAC;IAQD,KAAK,CAAC,UAAU;QACd,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAgB,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,UAAU,CAAE,CAAC;QAE9F,MAAM,IAAI,GAAS;YACjB,KAAK,EAAE,IAAI,CAAC,MAAO;YACjB,OAAO,EAAE,IAAI,CAAC,QAAS;SAC1B,CAAC;QAEF,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YACrD,UAAU,EAAE,IAAI;YAChB,OAAO,EAAE,QAAQ,CAAC,OAAO;YACzB,SAAS,EAAE,QAAQ;YACnB,OAAO,EAAE,aAAa;YACtB,OAAO,EAAE,IAAI;YACb,UAAU,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;SAChC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,cAAc,EAAE;YACjD,QAAQ,EAAE,IAAI;YACd,OAAO,EAAE,IAAI;YACb,MAAM,EAAE;gBACN,SAAS;aACV;SACF,CAAC,CAAC,CAAC;IACN,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;gBAMC,CAAC,CAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,GAAI,CAAC,CAAC,MAAc,CAAC,KAAK;;;;;;gBAMnD,CAAC,CAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,GAAI,CAAC,CAAC,MAAc,CAAC,KAAK;;;;;;sBAM/C,CAAC,IAAI,CAAC,WAAW,EAAE;mBACtB,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE;;WAE/B,CAAC;IACV,CAAC;CACF,CAAA;AAlEC;IADG,KAAK,EAAE;0CACiB;AAG3B;IADC,KAAK,EAAE;4CACqB;AAQ7B;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;gDACtB;AAG5B;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;2CAClB;AAjBhB,UAAU;IADtB,aAAa,CAAC,aAAa,CAAC;GAChB,UAAU,CAqEtB;SArEY,UAAU","sourcesContent":["\nimport { LitElement, html } from 'lit';\nimport { state, customElement } from 'lit/decorators.js';\nimport { InstalledCell, AppWebsocket, InstalledAppInfo } from '@holochain/client';\nimport { contextProvided } from '@holochain-open-dev/context';\nimport { appWebsocketContext, appInfoContext } from '../../../contexts';\nimport { Game } from '../../../types/binering/shiraz';\nimport '@material/mwc-button';\nimport '@type-craft/title/create-title';\nimport '@type-craft/content/create-content';\n\n@customElement('create-game')\nexport class CreateGame extends LitElement {\n\n    @state()\n  _title: string | undefined;\n\n  @state()\n  _content: string | undefined;\n\n  isGameValid() {\n    return this._title && \n      this._content;\n  }\n\n  @contextProvided({ context: appWebsocketContext })\n  appWebsocket!: AppWebsocket;\n\n  @contextProvided({ context: appInfoContext })\n  appInfo!: InstalledAppInfo;\n\n  async createGame() {\n    const cellData = this.appInfo.cell_data.find((c: InstalledCell) => c.role_id === 'binering')!;\n\n    const game: Game = {\n      title: this._title!,\n        content: this._content!,\n    };\n\n    const { entryHash } = await this.appWebsocket.callZome({\n      cap_secret: null,\n      cell_id: cellData.cell_id,\n      zome_name: 'shiraz',\n      fn_name: 'create_game',\n      payload: game,\n      provenance: cellData.cell_id[1]\n    });\n\n    this.dispatchEvent(new CustomEvent('game-created', {\n      composed: true,\n      bubbles: true,\n      detail: {\n        entryHash\n      }\n    }));\n  }\n\n  render() {\n    return html`\n      <div style=\"display: flex; flex-direction: column\">\n        <span style=\"font-size: 18px\">Create Game</span>\n\n        <create-title \n      \n      @change=${(e: Event) => this._title = (e.target as any).value}\n      style=\"margin-top: 16px\"\n    ></create-title>\n\n        <create-content \n      \n      @change=${(e: Event) => this._content = (e.target as any).value}\n      style=\"margin-top: 16px\"\n    ></create-content>\n\n        <mwc-button \n          label=\"Create Game\"\n          .disabled=${!this.isGameValid()}\n          @click=${() => this.createGame()}\n        ></mwc-button>\n    </div>`;\n  }\n}\n"]}