{"version":3,"file":"deck-component.js","sourceRoot":"","sources":["../../../../src/components/binering/shiraz/deck-component.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport './card-component';\nimport cssg from '../globalcss';\nimport { GameStore } from '../store';\nimport { StoreSubscriber } from 'lit-svelte-stores';\n\n@customElement('deck-component')\nexport class DeckComponent extends LitElement {\n  @state()\n  playerId?: number;\n\n  @state()\n  deckId!: string;\n\n  game = new StoreSubscriber(this, () => GameStore);\n  get deck() {\n    return this.game.value.players[this.playerId!].getDeck(this.deckId!);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n  }\n\n  render() {\n    return html` <div class=\"tooltip\">\n        <span class=\"tooltiptext\">${this.deck?.getDecimal()}</span>\n      </div>\n      <div\n        class=\"deck\"\n        @drop=${this.droped}\n        @dragover=${this.dragovered}\n        @dragenter=${this.dragEntered}\n        @dragend=${this.dragended}\n        @dragleave=${this.dragleaved}\n      >\n        ${this.deck!.cards.length > 0\n          ? this.deck!.cards.map(\n              (card, i, arr) =>\n                html`<card-component\n                  .playerId=${this.playerId}\n                  .value=${card}\n                  .deckId=${this.deckId}\n                  .draggable=${this.isdraggable(i, arr)}\n                >\n                </card-component>`\n            )\n          : html`<div class=\"empty\">${this.deckId.toUpperCase()}</div>`}\n      </div>`;\n  }\n\n  isdraggable(index: number, arr: boolean[]) {\n    const iscardIsLastIndex = arr.length - 1 === index ? true : false;\n\n    if (iscardIsLastIndex == false) return false;\n    // Game is not strated\n    if (\n      this.game.value.players[this.playerId!].turn == null ||\n      this.game.value.players[this.playerId!].turn == undefined\n    )\n      return true;\n\n    if (this.game.value.players[this.playerId!].turn == true) return true;\n    return false;\n  }\n\n  dragended() {\n    this.style.opacity = '1';\n  }\n  dragleaved() {\n    this.style.opacity = '1';\n  }\n  dragEntered(e: any) {}\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n  async droped(e: any) {\n    await this.game.value.transfer_card(\n      e.dataTransfer.types,\n      this.playerId!,\n      this.deckId\n    );\n    GameStore.update(val => {\n      val = this.game.value;\n      return val;\n    });\n    this.style.opacity = '1';\n  }\n  dragovered(e: any) {\n    this.style.opacity = '.5';\n    if (\n      this.deck?.acceptNewCard(\n        e.dataTransfer.types,\n        this.game.value\n          .getOponent(this.playerId!)\n          .can_Card_Transfer_To_Oponent()\n      )\n    ) {\n      e.preventDefault();\n    }\n  }\n  static get styles() {\n    return [\n      cssg,\n      css`\n        div.deck {\n          display: flex;\n          height: 200px;\n          flex-direction: column;\n        }\n\n        div.empty {\n          height: 100px;\n          width: 60px;\n          flex: 100px 1 0;\n          border-radius: 5px;\n\n          background-color: var(--background-color);\n          box-shadow: 3px 3px 3px gray;\n          color: white;\n          /* font-size: 0.5em; */\n          border: 3px solid;\n          border-color: gray;\n          -webkit-user-select: none; /* Safari */\n          -moz-user-select: none; /* Firefox */\n          -ms-user-select: none; /* IE10+/Edge */\n          user-select: none; /* Standard */\n        }\n\n        .tooltip {\n          position: relative;\n          display: inline-block;\n          border-bottom: 1px dotted black;\n        }\n\n        .tooltip .tooltiptext {\n          visibility: visible;\n          width: 40px;\n          background-color: black;\n          color: #fff;\n          text-align: center;\n          border-radius: 6px;\n          padding: 5px 0;\n          position: absolute !important;\n          /* z-index: 1; */\n          bottom: 150%;\n          left: 50%;\n          margin-left: -20px;\n          font-size: 0.6em;\n        }\n\n        .tooltip .tooltiptext::after {\n          content: '';\n          position: absolute;\n          top: 100%;\n          left: 50%;\n          margin-left: -5px;\n          border-width: 5px;\n          border-style: solid;\n          border-color: black transparent transparent transparent;\n          visibility: visible;\n        }\n\n        .tooltip:hover .tooltiptext {\n          visibility: visible;\n        }\n      `,\n    ];\n  }\n}\n"]}